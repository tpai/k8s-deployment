#!/usr/bin/env bash

export WHITELIST_IP=0.0.0.0/0
export HOST_NAME=od-aks.dev.theixt.com
export K8S_NAMESPACE=https-echo
export BASE64_SSL_CRT=LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZOakNDQkI2Z0F3SUJBZ0lTQTNHMTUzVHdHYXQvZGNNNlczbDhUR2pkTUEwR0NTcUdTSWIzRFFFQkN3VUEKTURJeEN6QUpCZ05WQkFZVEFsVlRNUll3RkFZRFZRUUtFdzFNWlhRbmN5QkZibU55ZVhCME1Rc3dDUVlEVlFRRApFd0pTTXpBZUZ3MHlNakEzTWpJeE56QXlNVGxhRncweU1qRXdNakF4TnpBeU1UaGFNQnN4R1RBWEJnTlZCQU1NCkVDb3VaR1YyTG5Sb1pXbDRkQzVqYjIwd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUIKQVFESnFqa1VCMUlCU2xNaUcwUzFnMXBRUmM2VnQ3UTdycmM5VU5oenBTQzcrSXpvaGdIVlRvZ2VETEoxZTZxRgpPRmVPdi9rM3dGRnZHWGk1aENBcTZ2aFprUjBQemJOTVZpTmUxUEFyL1dXQTFoZnk5U1NuL2J4cktMMmVJOGlQCkRYR293TkxUYjBldzBmSms5UlEvMHJ6TFhEK3BDZEpUbXVSNkJlMzNYNmd1MDFuT2E5Z1o3R0g4UWVxRTJLUEwKTXJ3VEl1VXZFZ3d4MnFURVJySFIwZEZNNDZxS0dPVkpLeGhhZi9HUDhrUkQ4MURRMWZqNzdzWXpKdkJJcEhFOAowNlU5OHpqMlo5aFBRK0JNd1AwRE8xZS9saHcxcTY2cENla2VXLzRXdUJ1Z3ZMSDg1SHRwU041VmZwa3RqdGhzCnltOC9tSjhrR0FrU043cTBoMDFldHhtaEFnTUJBQUdqZ2dKYk1JSUNWekFPQmdOVkhROEJBZjhFQkFNQ0JhQXcKSFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01Bd0dBMVVkRXdFQi93UUNNQUF3SFFZRApWUjBPQkJZRUZLNkt3WDhaSjNxU005YVk0US9VTlNHb25RWUVNQjhHQTFVZEl3UVlNQmFBRkJRdXN4ZTNXRmJMCnJsQUpRT1lmcjUyTEZNTEdNRlVHQ0NzR0FRVUZCd0VCQkVrd1J6QWhCZ2dyQmdFRkJRY3dBWVlWYUhSMGNEb3YKTDNJekxtOHViR1Z1WTNJdWIzSm5NQ0lHQ0NzR0FRVUZCekFDaGhab2RIUndPaTh2Y2pNdWFTNXNaVzVqY2k1dgpjbWN2TUNzR0ExVWRFUVFrTUNLQ0VDb3VaR1YyTG5Sb1pXbDRkQzVqYjIyQ0RtUmxkaTUwYUdWcGVIUXVZMjl0Ck1Fd0dBMVVkSUFSRk1FTXdDQVlHWjRFTUFRSUJNRGNHQ3lzR0FRUUJndDhUQVFFQk1DZ3dKZ1lJS3dZQkJRVUgKQWdFV0dtaDBkSEE2THk5amNITXViR1YwYzJWdVkzSjVjSFF1YjNKbk1JSUJCQVlLS3dZQkJBSFdlUUlFQWdTQgo5UVNCOGdEd0FIWUEzNlZlcTJpQ1R4OXNyZTY0WDA0K1d1ck5vaEtrYWw2T094TEFJRVJjS25NQUFBR0NKeE1hCkhRQUFCQU1BUnpCRkFpRUFuOHQ2TFUwQlBUd0lmTEtFbGx2bnVLZUh5WWVDYktxSFF6eitIMmZMRGRnQ0lDZ2cKNzhyMVliTGYrSTk1NEgwUU80a1ZhV1dQTUNwaHhHYys0OHhpcnQrUkFIWUFLWG0rOEo0NU9TSHdWbk9mWTZWMwo1YjVYZlp4Z0N2ajVUVjBtWENWZHg0UUFBQUdDSnhNYUVBQUFCQU1BUnpCRkFpQmZ2L21HT2Y0dVphMEliMjZ4CmhjNSt4Qk1scEtrWUdKZGthcGYwVXliaHhnSWhBTksvMEJTc2VSc2ZHbU9scjg0YS9tUXdMRDNHTzdlSm9tb1oKWVNTUENSYmFNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUJHRWN2K1YzNUJMZjBJRkJEd0xFclFCQ1NJWUJ0bwo0TVpJRGhCYTE4WEo4T29Vd0JWcWp6M29ZYTRXTFFRK3lrVGk3aDFISEkxQWdiSjl6R2VjOUVhM2pwWXJWWXhnCk1raENEbGc3MHpadjJVQVp4L01tWHNqKzhuOVQ2REhPLzJvM28zZG8rK2F5ZHJ2bXMxbjJMNDlvbVNiUXQ3YzAKTTlHZHFYZkNUcG91aGNpQmVsRXFDNm5WZEFFZEUrajRFbzhVOVFFTlhFVFUvMitXNHM5OEJHSGtwUHFoM3g4dApQU1dhWDE2UDhLSm5iNlpPMUxKTGZyNEMwWjVEcnNmVWFiejVpV2l6Q3pRRE4zMStGdnZ0czJhZnByZWRmREJZClpHemQ5TStYQUxnZnExQ3QvTXJUbVRWMlpTWm1XY2pSVTZabzQ5TDJzempYOER3anFwOERadkVjCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KCi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlGRmpDQ0F2NmdBd0lCQWdJUkFKRXJDRXJQREJpblUvYldMaVduWDFvd0RRWUpLb1pJaHZjTkFRRUxCUUF3ClR6RUxNQWtHQTFVRUJoTUNWVk14S1RBbkJnTlZCQW9USUVsdWRHVnlibVYwSUZObFkzVnlhWFI1SUZKbGMyVmgKY21Ob0lFZHliM1Z3TVJVd0V3WURWUVFERXd4SlUxSkhJRkp2YjNRZ1dERXdIaGNOTWpBd09UQTBNREF3TURBdwpXaGNOTWpVd09URTFNVFl3TURBd1dqQXlNUXN3Q1FZRFZRUUdFd0pWVXpFV01CUUdBMVVFQ2hNTlRHVjBKM01nClJXNWpjbmx3ZERFTE1Ba0dBMVVFQXhNQ1VqTXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUsKQW9JQkFRQzdBaFVvelBhZ2xOTVBFdXlOVlpMRCtJTHhtYVo2UW9pblhTYXF0U3U1eFV5eHI0NXIrWFhJbzljUApSNVFVVlRWWGpKNm9vamtaOVlJOFFxbE9idlU3d3k3YmpjQ3dYUE5aT09mdHoybndXZ3NidnNDVUpDV0gramR4CnN4UG5IS3pobSsvYjVEdEZVa1dXcWNGVHpqVElVdTYxcnUyUDNtQnc0cVZVcTdadERwZWxRRFJySzlPOFp1dG0KTkh6NmE0dVBWeW1aK0RBWFhicHliL3VCeGEzU2hsZzlGOGZuQ2J2eEsvZUczTUhhY1YzVVJ1UE1yU1hCaUx4ZwpaM1Ztcy9FWTk2SmM1bFAvT29pMlI2WC9FeGpxbUFsM1A1MVQrYzhCNWZXbWNCY1VyMk9rLzVtems1M2NVNmNHCi9raUZIYUZwcmlWMXV4UE1VZ1AxN1ZHaGk5c1ZBZ01CQUFHamdnRUlNSUlCQkRBT0JnTlZIUThCQWY4RUJBTUMKQVlZd0hRWURWUjBsQkJZd0ZBWUlLd1lCQlFVSEF3SUdDQ3NHQVFVRkJ3TUJNQklHQTFVZEV3RUIvd1FJTUFZQgpBZjhDQVFBd0hRWURWUjBPQkJZRUZCUXVzeGUzV0ZiTHJsQUpRT1lmcjUyTEZNTEdNQjhHQTFVZEl3UVlNQmFBCkZIbTBXZVo3dHVYa0FYT0FDSWpJR2xqMjZadHVNRElHQ0NzR0FRVUZCd0VCQkNZd0pEQWlCZ2dyQmdFRkJRY3cKQW9ZV2FIUjBjRG92TDNneExta3ViR1Z1WTNJdWIzSm5MekFuQmdOVkhSOEVJREFlTUJ5Z0dxQVloaFpvZEhSdwpPaTh2ZURFdVl5NXNaVzVqY2k1dmNtY3ZNQ0lHQTFVZElBUWJNQmt3Q0FZR1o0RU1BUUlCTUEwR0N5c0dBUVFCCmd0OFRBUUVCTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFDRnlrNUhQcVAzaFVTRnZOVm5lTEtZWTYxMVRSNlcKUFRObGNsUXRnYURxdyszNElMOWZ6TGR3QUxkdU8vWmVsTjdrSUorbTc0dXlBK2VpdFJZOGtjNjA3VGtDNTN3bAppa2ZtWlc0L1J2VFo4TTZVSys1VXpoSzhqQ2RMdU1HWUw2S3Z6WEdSU2dpM3lMZ2pld1F0Q1BrSVZ6NkQyUVF6CkNrY2hlQW1DSjhNcXlKdTV6bHp5Wk1qQXZubkFUNDV0UkF4ZWtyc3U5NHNRNGVnZFJDbmJXU0R0WTdraCtCSW0KbEpOWG9CMWxCTUVLSXE0UURVT1hvUmdmZnVEZ2hqZTFXckc5TUwrSGJpc3EveUZPR3dYRDlSaVg4RjZzdzZXNAphdkF1dkRzenVlNUwzc3o4NUsrRUM0WS93RlZETnZabzRUWVhhbzZaMGYrbFFLYzB0OERRWXprMU9YVnU4cnAyCnlKTUM2YWxMYkJmT0RBTFp2WUg3bjdkbzFBWmxzNEk5ZDFQNGpua0RyUW94QjNVcVE5aFZsM0xFS1E3M3hGMU8KeUs1R2hERFg4b1ZmR0tGNXUrZGVjSXNINFlhVHc3bVAzR0Z4SlNxdjMrMGxVRkpvaTVMYzVkYTE0OXA5MElkcwpoQ0V4cm9MMSs3bXJ5SWtYUGVGTTVUZ085cjBydlphQkZPdlYyejBncDM1WjArTDRXUGxidUVqTi9seFBGaW4rCkhsVWpyOGdSc0kzcWZKT1FGeS85cktJSlIwWS84T213dC84b1RXZ3kxbWRlSG1tams3ajFuWXN2QzlKU1E2WnYKTWxkbFRUS0IzemhUaFYxK1hXWXA2cmpkNUpXMXpiVldFa0xOeEU3R0pUaEVVRzNzemdCVkdQN3BTV1RVVHNxWApuTFJid0hPb3E3aEh3Zz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KCi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlGWURDQ0JFaWdBd0lCQWdJUVFBRjNJVGZVNlVLNDduYXFQR1FLdHpBTkJna3Foa2lHOXcwQkFRc0ZBREEvCk1TUXdJZ1lEVlFRS0V4dEVhV2RwZEdGc0lGTnBaMjVoZEhWeVpTQlVjblZ6ZENCRGJ5NHhGekFWQmdOVkJBTVQKRGtSVFZDQlNiMjkwSUVOQklGZ3pNQjRYRFRJeE1ERXlNREU1TVRRd00xb1hEVEkwTURrek1ERTRNVFF3TTFvdwpUekVMTUFrR0ExVUVCaE1DVlZNeEtUQW5CZ05WQkFvVElFbHVkR1Z5Ym1WMElGTmxZM1Z5YVhSNUlGSmxjMlZoCmNtTm9JRWR5YjNWd01SVXdFd1lEVlFRREV3eEpVMUpISUZKdmIzUWdXREV3Z2dJaU1BMEdDU3FHU0liM0RRRUIKQVFVQUE0SUNEd0F3Z2dJS0FvSUNBUUN0NkNSejlCUTM4NXVlSzFjb0hJZSszTGZmT0pDTWJqem1WNkI0OTNYQwpvdjcxYW03MkFFOG8yOTVvaG14RWs3YXhZLzBVRW11L0g5THFNWnNoZnRFelBMcEk5ZDE1MzdPNC94THhJWnBMCndZcUdjV2xLWm1ac2ozNDhjTCt0S1NJRzgrVEE1b0N1NGt1UHQ1bCtsQU9mMDBlWGZKbElJMVBvT0s1UENtK0QKTHRGSlY0eUFkTGJhTDlBNGpYc0RjQ0ViZGZJd1BQcVBydDNhWTZ2ckZrL0NqaEZMZnM4TDZQKzFkeTcwc250Swo0RXdTSlF4d2pRTXBvT0ZUSk93VDJlNFp2eEN6U293L2lhTmhVZDZzaHdlVTlHTng3QzdpYjF1WWdlR0pYRFI1CmJIYnZPNUJpZWViYnBKb3ZKc1hRRU9FTzN0a1FqaGI3dC9lbzk4ZmxBZ2VZanpZSWxlZmlONVlOTm5XZSt3NXkKc1IyYnZBUDVTUVhZZ2QwRnRDcldRZW1zQVhhVkNnL1kzOVc5RWg4MUx5Z1hiTktZd2FnSlpIZHVSemU2enF4WgpYbWlkZjNMV2ljVUdRU2srV1Q3ZEp2VWt5UkduV3FOTVFCOUdvWm0xcHpwUmJvWTdubjF5cHhJRmVGbnRQbEY0CkZRc0RqNDNRTHdXeVBudEtIRXR6QlJMOHh1cmdVQk44UTVOMHM4cDA1NDRmQVFqUU1OUmJjVGEwQjdyQk1EQmMKU0xlQ081aW1mV0NLb3FNcGdzeTZ2WU1FRzZLREEwR2gxZ1h4RzhLMjhLaDhoanRHcUVncWlOeDJtbmEvSDJxbApQUm1QNnpqelpON0lLdzBLS1AvMzIrSVZRdFFpMENkZDRYbitHT2R3aUsxTzV0bUxPc2JkSjFGdS83eGs5VE5EClR3SURBUUFCbzRJQlJqQ0NBVUl3RHdZRFZSMFRBUUgvQkFVd0F3RUIvekFPQmdOVkhROEJBZjhFQkFNQ0FRWXcKU3dZSUt3WUJCUVVIQVFFRVB6QTlNRHNHQ0NzR0FRVUZCekFDaGk5b2RIUndPaTh2WVhCd2N5NXBaR1Z1ZEhKMQpjM1F1WTI5dEwzSnZiM1J6TDJSemRISnZiM1JqWVhnekxuQTNZekFmQmdOVkhTTUVHREFXZ0JURXA3R2tleXh4Cit0dmhTNUIxLzhRVllJV0pFREJVQmdOVkhTQUVUVEJMTUFnR0JtZUJEQUVDQVRBL0Jnc3JCZ0VFQVlMZkV3RUIKQVRBd01DNEdDQ3NHQVFVRkJ3SUJGaUpvZEhSd09pOHZZM0J6TG5KdmIzUXRlREV1YkdWMGMyVnVZM0o1Y0hRdQpiM0puTUR3R0ExVWRId1ExTURNd01hQXZvQzJHSzJoMGRIQTZMeTlqY213dWFXUmxiblJ5ZFhOMExtTnZiUzlFClUxUlNUMDlVUTBGWU0wTlNUQzVqY213d0hRWURWUjBPQkJZRUZIbTBXZVo3dHVYa0FYT0FDSWpJR2xqMjZadHUKTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFBS2N3QnNsbTcvRGxMUXJ0Mk01MW9HclMrbzQ0Ky95UW9ERlZEQwo1V3hDdTIrYjlMUlB3a1NJQ0hYTTZ3ZWJGR0p1ZU43c0o3bzVYUFdpb1c1V2xIQVFVN0c3NUsvUW9zTXJBZFNXCjlNVWdOVFA1MkdFMjRIR050TGkxcW9KRmxjRHlxU01vNTlhaHkyY0kycUJETEtvYmt4L0ozdldyYVYwVDlWdUcKV0NMS1RWWGtjR2R0d2xmRlJqbEJ6NHBZZzFodG1mNVg2RFlPOEE0anF2MklsOURqWEE2VVNiVzFGelhTTHI5TwpoZThZNElXUzZ3WTdiQ2tqQ1dEY1JRSk1FaGc3NmZzTzN0eEUrRmlZcnVxOVJVV2hpRjFteXY0UTZXK0N5QkZDCkRmdnA3T09HQU42ZEVPTTQrcVI5c2Rqb1NZS0VCcHNyNkd0UEFRdzRkeTc1M2VjNQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
export BASE64_SSL_KEY=LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBeWFvNUZBZFNBVXBUSWh0RXRZTmFVRVhPbGJlME82NjNQVkRZYzZVZ3UvaU02SVlCCjFVNklIZ3l5ZFh1cWhUaFhqci81TjhCUmJ4bDR1WVFnS3VyNFdaRWREODJ6VEZZalh0VHdLLzFsZ05ZWDh2VWsKcC8yOGF5aTluaVBJancxeHFNRFMwMjlIc05IeVpQVVVQOUs4eTF3L3FRblNVNXJrZWdYdDkxK29MdE5aem12WQpHZXhoL0VIcWhOaWp5eks4RXlMbEx4SU1NZHFreEVheDBkSFJUT09xaWhqbFNTc1lXbi94ai9KRVEvTlEwTlg0CisrN0dNeWJ3U0tSeFBOT2xQZk00OW1mWVQwUGdUTUQ5QXp0WHY1WWNOYXV1cVFucEhsditGcmdib0x5eC9PUjcKYVVqZVZYNlpMWTdZYk1wdlA1aWZKQmdKRWplNnRJZE5YcmNab1FJREFRQUJBb0lCQVFDeGkrZHl4YnNpSGJDeApiM1ovcENTSVZkMDZuU0RXQnMyVzh5Mk9LMHgxa2E5bExFNUM0VUFmektmMW5Tb1UzZlRnWGczcFVxMmZkYnAvCkFsOWJ5Y0ZiQWRLblRqL1VMbVkzb0p2Tzd1cEZrcmhGRkNUd3Jna01Bek5tSGpUK0ZTVURJTGk4bzlWblRIL3UKK0lLYWFrd0RjclV0ZXRNcy9rcTNUNjhod3BzTWxVRDlpcDEyRVczWHVHOG42K0cvZWtBZkYzVXFjb0NvUWFWWApBaTRFN00yYWR0eEdCM1hkdnF4WVorUDFIdThkckhNVHZYTmZiV0gxeVdudUJ5dCtkUnhOajZLQ3BSRHk5MW4zClkwc1lyOFBDYVFXVGt0Q0ZaUkcrb2ZUTk12cjZZZy9Pb1MyZmxFTnBvN1FOb2pSbVdha3BqakZJZWsvdE04MnIKU3gybVdOK1JBb0dCQU9SYzVJRXNBdFJwdUtlaWozSTBXTys3TmoyamVLTVFpYUdpT0tJemRtTXFVRmFRdEVpMgp5UVpSTXkvdWtOS09lL0RjMFBFRE1JUlI3OGRYVWVIYWlleDB0SENPcVZralp0TmpSemtWV2prRkZ0RXJHRXVRCnpzUmM5a1JPLytvTzhPcWlSU3hiMlRWcW4rSkRQYm42WEk5U20ydzNreTVLcVVaeWw2MW9OSzRWQW9HQkFPSVMKTGNLYm40Vkp4NjNSak5FVkdiZUFrQ2l5ZERZLzhVV2NoYW9KZ3ZTYTM1TnZPMDRua1pmQy9qSktRRG1EaTQ4YgpXOHdNYSt2c3JKS2Q2Zy9UdWRMVHgwMnRXdkg2Y3dVSGFPS3kya0VaaWcrMGdSQUhFUm1EamNydGdrU0xUeWdSCnN1VnZZa1lrR0hZSXdibXBoVm9oN0ZTeXpEazE0ak1jZjhYZFYyeGRBb0dBTWxLdUlERDhwcVp0aExOei9PekEKTklRQzNlNXFKVFQ5djFxcU5FUTI4SDlnbU5MbWg2ZVFBUTVmdzA1Rko4RXlXcyt1VTQ0cVlONVZnbzRoZ3kzUApld1gweFdFS3ZKUHFrdWFyeVU2RlJVOXp5Y0EvYUZlTzJRTExXaDQya3ZPYjczaTIyYUdiNmdPSEhDdEpMUFNZCjlSUjFINUhYb3puY3Q2T0UvVGViZEVrQ2dZQVp4SlN1citwWTJQWUhtL0QvQy9hb2NlRDhvb3FZZkdWVjErZHMKWURVckNGUWZpL2dvaWw0UC9FdlpFNW1LZExIOWw5SzR5Vm1yeEloUEZlek43UVlyUDdSaDZEYUxpazU5N2tCSQpScmFWNFFGWmxPdDVGalVld1YzeUdXeFZ2OE0vLy9SeUxtWDNOTG9OQ2laNnNSWGdGaW5INWJGZGZBVFNhcGN0CnlITGtpUUtCZ1FES0pjRWRzMFZHOTBWY3k3QytyeDlkckF0Wm83VGdudzF5YWJ2ZnJzYVl3MDJtYUc3TVZFd1IKNGE1anlmQUIybDZ1bzVLQVd0RlhHOWhQcjFLRTVZZi8rUjA3L09BV1NESS9qYVZOTUZGbW55cmx2a0ZnTElsMwpOSDlFNmJaeXM2WFZWYnF4VjRTZm5QUGpPTDlKd2x3S1RNQkV6QkVCYWpydmc1VVlNeUVDRUE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=

envsubst < tmpl/nginx-ingress.yaml > nginx-ingress.yaml
envsubst < tmpl/deployment.yaml > deployment.yaml
